{% extends "base.html" %}
{% load static %}
{% block content %}
{{ product }}
{% if user.is_authenticated %}
<form action="{% url 'product_like' object.id %}" method="POST">
    {% csrf_token %}
    {% if post_is_liked %}
    <button type="submit" name="blogpost_id" value="{{product.id}}">Unlike</button>
    {% else %}
    <button type="submit" name="blogpost_id" value="{{product.id}}">Like</button>
    {% endif %}
</form>
{% else %}
<a href="{% url 'login' %}?next={{request.path}}">Log in to like this item!</a><br>
{% endif %}
<strong>{{ number_of_likes }} Like{{ number_of_likes|pluralize }}</strong>
<br>

<h4>Comments:</h4>
{% if product.productreview.all %}
{% for review in product.productreview.all %}
<hr>
<strong>{{ review.reviewer }}</strong>, <em>{{ review.date_created}}</em>
<p>{{ review.content }}</p>
{% endfor %}
{% else %}
<p>There are no comments</p>

{% endif %}
{% if user.is_authenticated %}
<div class="fieldWrapper">
    <hr>
    <h4>Leave a comment:</h4>
    <form action="" method="post">
        {% csrf_token %}
        {{ form.content }}
        <input type="submit" value="Post">
    </form>
</div>
{% endif %}
{% endblock %}